<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="stylesheet" href="../.././src/pygments.css"></link><link rel="shortcut icon" href="../.././favicon.ico"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Linter.Util</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Lean.Linter.Util";</script><script type="module" src="../.././nav.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label>Documentation</h1><p class="header_filename break_within">Lean.Linter.Util</p><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib_docs"></input><input type="text" name="q" autocomplete="off"></input><button>Google site search</button></form></header><nav class="internal_nav"><h3><a class="break_within" href="#top">Lean.Linter.Util</a></h3><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Linter/Util.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init.html">Init</a></li><li><a href="../.././Lean/Data/Options.html">Lean.Data.Options</a></li><li><a href="../.././Lean/Elab/Command.html">Lean.Elab.Command</a></li><li><a href="../.././Lean/Server/InfoUtils.html">Lean.Server.InfoUtils</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Linter.Util" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Linter.linter.all">Lean.Linter.linter.all</a></div><div class="nav_link"><a class="break_within" href="#Lean.Linter.getLinterAll">Lean.Linter.getLinterAll</a></div><div class="nav_link"><a class="break_within" href="#Lean.Linter.getLinterValue">Lean.Linter.getLinterValue</a></div><div class="nav_link"><a class="break_within" href="#Lean.Linter.logLint">Lean.Linter.logLint</a></div><div class="nav_link"><a class="break_within" href="#Lean.Linter.collectMacroExpansions?">Lean.Linter.collectMacroExpansions?</a></div><div class="nav_link"><a class="break_within" href="#Lean.Linter.collectMacroExpansions?.go">Lean.Linter.collectMacroExpansions?.go</a></div><div class="nav_link"><a class="break_within" href="#Lean.Linter.SyntaxStack">Lean.Linter.SyntaxStack</a></div><div class="nav_link"><a class="break_within" href="#Lean.Linter.findSyntaxStack?">Lean.Linter.findSyntaxStack?</a></div><div class="nav_link"><a class="break_within" href="#Lean.Linter.findSyntaxStack?.go">Lean.Linter.findSyntaxStack?.go</a></div><div class="nav_link"><a class="break_within" href="#Lean.Linter.stackMatches">Lean.Linter.stackMatches</a></div><div class="nav_link"><a class="break_within" href="#Lean.Linter.IgnoreFunction">Lean.Linter.IgnoreFunction</a></div></nav><main>
<div class="decl" id="Lean.Linter.linter.all"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Linter/Util.lean#L7-L7">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Linter/Util.html#Lean.Linter.linter.all">Lean.Linter.linter.all</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div></div></div><div class="decl" id="Lean.Linter.getLinterAll"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Linter/Util.lean#L12-L12">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Linter/Util.html#Lean.Linter.getLinterAll">Lean.Linter.getLinterAll</a></span><span class="decl_args">
<span class="fn">(o : <a href="../.././Lean/Data/Options.html#Lean.Options">Lean.Options</a>)</span></span>
<span class="decl_args">
<span class="fn">(defValue : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <span class="fn"><a href="../.././Lean/Linter/Util.html#Lean.Linter.linter.all">Lean.Linter.linter.all</a>.defValue</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Linter/Util.html#Lean.Linter.getLinterAll">Lean.Linter.getLinterAll</a> <span class="fn">o</span> <span class="fn">defValue</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/Data/KVMap.html#Lean.KVMap.get">Lean.KVMap.get</a> <span class="fn">o</span> <span class="fn"><a href="../.././Lean/Linter/Util.html#Lean.Linter.linter.all">Lean.Linter.linter.all</a>.name</span> <span class="fn">defValue</span></span></span></li></ul></details></div></div><div class="decl" id="Lean.Linter.getLinterValue"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Linter/Util.lean#L14-L14">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Linter/Util.html#Lean.Linter.getLinterValue">Lean.Linter.getLinterValue</a></span><span class="decl_args">
<span class="fn">(opt : <span class="fn"><a href="../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(o : <a href="../.././Lean/Data/Options.html#Lean.Options">Lean.Options</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Linter/Util.html#Lean.Linter.getLinterValue">Lean.Linter.getLinterValue</a> <span class="fn">opt</span> <span class="fn">o</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/Data/KVMap.html#Lean.KVMap.get">Lean.KVMap.get</a> <span class="fn">o</span> <span class="fn"><span class="fn">opt</span>.name</span> (<span class="fn"><a href="../.././Lean/Linter/Util.html#Lean.Linter.getLinterAll">Lean.Linter.getLinterAll</a> <span class="fn">o</span> <span class="fn"><span class="fn">opt</span>.defValue</span></span>)</span></span></li></ul></details></div></div><div class="decl" id="Lean.Linter.logLint"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Linter/Util.lean#L18-L19">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Linter/Util.html#Lean.Linter.logLint">Lean.Linter.logLint</a></span><span class="decl_args">
<span class="fn">(linterOption : <span class="fn"><a href="../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(msg : <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Command.html#Lean.Elab.Command.CommandElabM">Lean.Elab.Command.CommandElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Linter.collectMacroExpansions?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Linter/Util.lean#L28-L49">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Linter/Util.html#Lean.Linter.collectMacroExpansions?">Lean.Linter.collectMacroExpansions?</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><span class="fn">Type</span> → <span class="fn">Type u_1</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(range : <a href="../.././Lean/Server/InfoUtils.html#String.Range">String.Range</a>)</span></span>
<span class="decl_args">
<span class="fn">(tree : <a href="../.././Lean/Elab/InfoTree/Types.html#Lean.Elab.InfoTree">Lean.Elab.InfoTree</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> (<span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/InfoTree/Types.html#Lean.Elab.MacroExpansionInfo">Lean.Elab.MacroExpansionInfo</a></span>)</span>)</span></div></div><p>Go upwards through the given <code>tree</code> starting from the smallest node that
contains the given <code>range</code> and collect all <code>MacroExpansionInfo</code>s on the way up.
The result is <code>some []</code> if no <code>MacroExpansionInfo</code> was found on the way and
<code>none</code> if no <code>InfoTree</code> node was found that covers the given <code>range</code>.</p><p>Return the result reversed, s.t. the macro expansion that would be applied to
the original syntax first is the first element of the returned list.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Linter.collectMacroExpansions?.go"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Linter/Util.lean#L34-L49">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Linter/Util.html#Lean.Linter.collectMacroExpansions?.go">Lean.Linter.collectMacroExpansions?.go</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><span class="fn">Type</span> → <span class="fn">Type u_1</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(range : <a href="../.././Lean/Server/InfoUtils.html#String.Range">String.Range</a>)</span></span>
<span class="decl_args">
<span class="fn">(tree : <a href="../.././Lean/Elab/InfoTree/Types.html#Lean.Elab.InfoTree">Lean.Elab.InfoTree</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> (<span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> (<span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/InfoTree/Types.html#Lean.Elab.MacroExpansionInfo">Lean.Elab.MacroExpansionInfo</a></span>)</span>)</span>)</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Linter.SyntaxStack"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Linter/Util.lean#L54-L54">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Linter/Util.html#Lean.Linter.SyntaxStack">Lean.Linter.SyntaxStack</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">Type</span></div></div><p>List of <code>Syntax</code> nodes in which each succeeding element is the parent of
the current. The associated index is the index of the preceding element in the
list of children of the current element.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Linter/Util.html#Lean.Linter.SyntaxStack">Lean.Linter.SyntaxStack</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> (<span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span></li></ul></details></div></div><div class="decl" id="Lean.Linter.findSyntaxStack?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Linter/Util.lean#L60-L76">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Linter/Util.html#Lean.Linter.findSyntaxStack?">Lean.Linter.findSyntaxStack?</a></span><span class="decl_args">
<span class="fn">(root : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(child : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Linter/Util.html#Lean.Linter.SyntaxStack">Lean.Linter.SyntaxStack</a></span></div></div><p>Go upwards through the given <code>root</code> syntax starting from <code>child</code> and
collect all <code>Syntax</code> nodes on the way up.</p><p>Return <code>none</code> if the <code>child</code> is not found in <code>root</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Linter.findSyntaxStack?.go"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Linter/Util.lean#L63-L75">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Linter/Util.html#Lean.Linter.findSyntaxStack?.go">Lean.Linter.findSyntaxStack?.go</a></span><span class="decl_args">
<span class="fn">(child : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(childRange : <a href="../.././Lean/Server/InfoUtils.html#String.Range">String.Range</a>)</span></span>
<span class="decl_args">
<span class="fn">(stack : <a href="../.././Lean/Linter/Util.html#Lean.Linter.SyntaxStack">Lean.Linter.SyntaxStack</a>)</span></span>
<span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Linter/Util.html#Lean.Linter.SyntaxStack">Lean.Linter.SyntaxStack</a></span></div></div></div></div><div class="decl" id="Lean.Linter.stackMatches"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Linter/Util.lean#L80-L84">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Linter/Util.html#Lean.Linter.stackMatches">Lean.Linter.stackMatches</a></span><span class="decl_args">
<span class="fn">(stack : <a href="../.././Lean/Linter/Util.html#Lean.Linter.SyntaxStack">Lean.Linter.SyntaxStack</a>)</span></span>
<span class="decl_args">
<span class="fn">(pattern : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> (<span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Lean.SyntaxNodeKind">Lean.SyntaxNodeKind</a></span>)</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Bool">Bool</a></div></div><p>Compare the <code>SyntaxNodeKind</code>s in <code>pattern</code> to those of the <code>Syntax</code>
elements in <code>stack</code>. Return <code>false</code> if <code>stack</code> is shorter than <code>pattern</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Linter.IgnoreFunction"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Linter/Util.lean#L86-L86">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Linter/Util.html#Lean.Linter.IgnoreFunction">Lean.Linter.IgnoreFunction</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">Type</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Linter/Util.html#Lean.Linter.IgnoreFunction">Lean.Linter.IgnoreFunction</a> <a href="../.././Init/Prelude.html#Eq">=</a> (<span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <span class="fn"><a href="../.././Lean/Linter/Util.html#Lean.Linter.SyntaxStack">Lean.Linter.SyntaxStack</a> → <span class="fn"><a href="../.././Lean/Data/Options.html#Lean.Options">Lean.Options</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a></span></span></span>)</span></li></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././/navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>